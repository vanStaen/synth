(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(7),c=n.n(s),r=(n(16),n(2)),o=n(8),l=n(9),u=n(5),m={C:[16.35,32.7,65.41,130.81,261.63,523.25,1046.5,2093],Db:[17.32,34.65,69.3,138.59,277.18,554.37,1108.73,2217.46],D:[18.35,36.71,73.42,146.83,293.66,587.33,1174.66,2349.32],Eb:[19.45,38.89,77.78,155.56,311.13,622.25,1244.51,2489.02],E:[20.6,41.2,82.41,164.81,329.63,659.26,1318.51,2637.02],F:[21.83,43.65,87.31,174.61,349.23,698.46,1396.91,2793.83],Gb:[23.12,46.25,92.5,185,369.99,739.99,1479.98,2959.96],G:[24.5,49,98,196,392,783.99,1567.98,3135.96],Ab:[25.96,51.91,103.83,207.65,415.3,830.61,1661.22,3322.44],A:[27.5,55,110,220,440,880,1760,3520],Bb:[29.14,58.27,116.54,233.08,466.16,932.33,1864.66,3729.31],B:[30.87,61.74,123.47,246.94,493.88,987.77,1975.53,3951.07]};function d(e,t){return m[e][t-1]}var b=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];var j=function(e,t){var n=t.freq,a=t.name,i=t.audioContext,s=(t.primaryFilter,t.sineGain),c=t.squareGain,r=t.noiseGain,o=i.createGain();o.gain.setValueAtTime(0,0),o.connect(s);var l=i.createGain();l.gain.setValueAtTime(0,0),l.connect(c);var u=i.createGain();u.gain.setValueAtTime(0,0),u.connect(r);var m=i.createOscillator();m.frequency.setValueAtTime(n,0),m.type="sine",m.connect(o),m.start();var d=i.createOscillator();d.frequency.setValueAtTime(n,0),d.type="square",d.connect(l),d.start();for(var b=i.createBuffer(1,1*i.sampleRate,i.sampleRate),j=b.getChannelData(0),v=0;v<b.length;v++)j[v]=2*Math.random()-1;i.resume();var O=i.createBufferSource();O.buffer=b,O.connect(u),O.loop=!0,O.start(),e.addNote(n,a,o,m,l,d,u,O)},v=new(function(){function e(){Object(o.a)(this,e),this.notes=[],Object(u.b)(this,{notes:u.c,addNote:u.a})}return Object(l.a)(e,[{key:"createAllNotes",value:function(e){!function(e,t){var n=t.audioContext,a=t.primaryFilter,i=t.sineGain,s=t.squareGain,c=t.noiseGain;b.forEach((function(t){var r;for(r=1;r<9;r++)j(e,{freq:d(t,r),name:"".concat(t).concat(r),audioContext:n,primaryFilter:a,sineGain:i,squareGain:s,noiseGain:c})}))}(this,e)}},{key:"addNote",value:function(e,t,n,a,i,s,c,r){var o={freq:e,name:t,sineNoteGain:n,sineOsc:a,squareNoteGain:i,squareOsc:s,noiseNoteGain:c,noise:r};this.notes.push(o)}}]),e}()),O=n(41);var f=n.p+"static/media/knob.8deadf84.svg",x=(n(18),n(0)),N=function(e){var t=e.value,n=e.min,i=e.max,s=e.multiply,c=e.valueSetter,o=e.knobName,l=e.unit,u=Object(a.useState)(!1),m=Object(r.a)(u,2),d=m[0],b=m[1],j=Object(a.useState)(t),v=Object(r.a)(j,2),O=v[0],N=v[1],h=Object(a.useState)(0),p=Object(r.a)(h,2),g=p[0],G=p[1],y=Object(a.useState)(!1),_=Object(r.a)(y,2),k=_[0],A=_[1];Object(a.useEffect)((function(){document.getElementById(o).setAttribute("draggable","false"),N(O*s);var e=function(e,t,n,a,i){return e*i/(n-t)+a}(O,n,i,-90,310);document.getElementById(o).style.setProperty("transform","rotate(".concat(e,"deg)"))}),[o,N,s,n,i]);var T=Object(a.useCallback)((function(e){window.addEventListener("mouseup",V),G(e.clientY),A(!0)}),[G,A]),V=Object(a.useCallback)((function(){window.removeEventListener("mouseup",V),G(0),A(!1)}),[G,A]),w=Object(a.useCallback)((function(){k||G(0)}),[k,G]),C=Object(a.useCallback)((function(e){if(0!==g&&k){var t=e.clientY,a=g-t+50;a>100&&(a=100),a<0&&(a=0);var r=3.1*a-90,l=(i-n)*(r- -90)/310;document.getElementById(o).style.setProperty("transform","rotate(".concat(r,"deg)")),c(l),N(Math.round(l*s))}}),[g,k,n,i,s,o,c]);return Object(x.jsxs)("div",{className:"knob",onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(x.jsx)("img",{src:f,id:o,className:"knob__image",onMouseDown:T,onMouseMove:C,onMouseLeave:w}),d?Object(x.jsxs)("span",{className:"knob__value",children:[O,l]}):Object(x.jsx)("span",{className:"knob__name",children:o})]})},h=n(42),p=function(){return Object(a.useEffect)((function(){var e=document.querySelector(".mdc-slider");if(!e)throw new Error("Mdc Slider was not initialised");new h.a(e)}),[]),Object(x.jsxs)("div",{className:"mdc-slider",children:[Object(x.jsx)("input",{className:"mdc-slider__input",type:"range",min:"0",max:"100",value:"50",name:"volume","aria-label":"Continuous slider demo"}),Object(x.jsxs)("div",{className:"mdc-slider__track",children:[Object(x.jsx)("div",{className:"mdc-slider__track--inactive"}),Object(x.jsx)("div",{className:"mdc-slider__track--active",children:Object(x.jsx)("div",{className:"mdc-slider__track--active_fill"})})]}),Object(x.jsxs)("div",{className:"mdc-slider__thumb",children:[Object(x.jsx)("div",{className:"mdc-slider__value-indicator-container","aria-hidden":"true",children:Object(x.jsx)("div",{className:"mdc-slider__value-indicator",children:Object(x.jsx)("span",{className:"mdc-slider__value-indicator-text",children:"Octave selector"})})}),Object(x.jsx)("div",{className:"mdc-slider__thumb-knob"})]})]})},g=(n(20),function(e){e.octave,e.setOctave;var t=e.mainVolume,n=e.setMainVolume,a=e.noiseVolume,i=e.setNoiseVolume,s=e.sineVolume,c=e.setSineVolume,r=e.squareVolume,o=e.setSquareVolume,l=e.filterFreq,u=e.setFilterFreq;return Object(x.jsx)("div",{className:"ControlGrid__container",children:Object(x.jsxs)(O.a,{container:!0,spacing:2,children:[Object(x.jsx)(O.a,{item:!0,xs:6,children:Object(x.jsxs)("div",{className:"ControlGrid__gridItem",children:[Object(x.jsx)(N,{value:t,valueSetter:n,knobName:"vol",min:0,max:.1,multiply:1e3,unit:"%"}),Object(x.jsx)(N,{value:a,valueSetter:i,knobName:"noise",min:.01,max:1,multiply:100,unit:"%"}),Object(x.jsx)(N,{value:s,valueSetter:c,knobName:"sin",min:.01,max:1,multiply:100,unit:"%"}),Object(x.jsx)(N,{value:r,valueSetter:o,knobName:"square",min:.01,max:.8,multiply:100,unit:"%"})]})}),Object(x.jsx)(O.a,{item:!0,xs:6,children:Object(x.jsxs)("div",{className:"ControlGrid__gridItem",children:[Object(x.jsx)(N,{value:t,valueSetter:n,knobName:"Attack",min:0,max:100,multiply:1,unit:"%"}),Object(x.jsx)(N,{value:t,valueSetter:n,knobName:"Decay",min:0,max:100,multiply:1,unit:"%"}),Object(x.jsx)(N,{value:t,valueSetter:n,knobName:"Release",min:0,max:100,multiply:1,unit:"%"}),Object(x.jsx)(N,{value:t,valueSetter:n,knobName:"Sustain",min:0,max:100,multiply:1,unit:"%"})]})}),Object(x.jsx)(O.a,{item:!0,xs:2,children:Object(x.jsx)(N,{value:l,valueSetter:u,knobName:"filter",min:30,max:2e4,multiply:1,unit:"hz"})}),Object(x.jsx)(O.a,{item:!0,xs:4,children:Object(x.jsx)("div",{className:"ControlGrid__gridItem",children:"4"})}),Object(x.jsx)(O.a,{item:!0,xs:6,children:Object(x.jsx)("div",{className:"ControlGrid__gridItem",children:"Graph"})}),Object(x.jsx)(O.a,{item:!0,xs:3,children:Object(x.jsx)("div",{className:"ControlGrid__gridItem",children:"3"})}),Object(x.jsx)(O.a,{item:!0,xs:4,children:Object(x.jsx)("div",{className:"ControlGrid__gridItem",children:"xs=4"})}),Object(x.jsx)(O.a,{item:!0,xs:4,children:Object(x.jsx)("div",{className:"ControlGrid__gridItem",children:"xs=4"})}),Object(x.jsx)(O.a,{item:!0,xs:5,children:Object(x.jsx)("div",{className:"ControlGrid__gridItem",children:Object(x.jsx)(p,{})})})]})})}),G=(n(25),{a:"C",w:"Db",s:"D",e:"Eb",d:"E",f:"F",t:"Gb",g:"G",z:"Ab",h:"A",u:"Bb",j:"B"});function y(e,t){var n=document.getElementById(G[e]);G[e].includes("b")?null===n||void 0===n||n.classList.toggle("black__pressed",t):null===n||void 0===n||n.classList.toggle("white__pressed",t)}var _=[{note:"C",className:"white e"},{note:"Db",className:"black ds"},{note:"D",className:"white d"},{note:"Eb",className:"black cs"},{note:"E",className:"white c"},{note:"F",className:"white b"},{note:"Gb",className:"black as"},{note:"G",className:"white a"},{note:"Ab",className:"black gs"},{note:"A",className:"white g"},{note:"Bb",className:"black fs"},{note:"B",className:"white f"}],k=function(e){var t=e.playNoteHandler,n=e.stopNoteHandler,i=e.octave,s=Object(a.useState)(window.innerWidth),c=Object(r.a)(s,2),o=(c[0],c[1]),l=function(){o(window.innerWidth)};return Object(a.useEffect)((function(){return window.addEventListener("resize",l),function(){window.removeEventListener("resize",l)}}),[o]),function(e){var t=e.playNoteHandler,n=e.stopNoteHandler,i=e.octave;Object(a.useEffect)((function(){var e=function(e){var n=e.key.toLowerCase();n in G&&(y(n,!0),t(d(G[n],i)))},a=function(e){var t=e.key.toLowerCase();t in G&&(y(t,!1),n(d(G[t],i)))};return document.addEventListener("keydown",e),document.addEventListener("keyup",a),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}}))}(e),Object(x.jsx)("div",{children:Object(x.jsx)("ul",{className:"set",children:_.map((function(e){return Object(x.jsx)("li",{id:e.note,className:e.className,onMouseDown:function(){return t(d(e.note,i))},onMouseUp:function(){return n(d(e.note,i))},onMouseLeave:function(){return n(d(e.note,i))}},e.note)}))})})},A=(n(26),function(){var e=Object(a.useState)(5),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(.05),c=Object(r.a)(s,2),o=c[0],l=c[1],u=Object(a.useState)(1),m=Object(r.a)(u,2),d=m[0],b=m[1],j=Object(a.useState)(1),O=Object(r.a)(j,2),f=O[0],N=O[1],h=Object(a.useState)(1),p=Object(r.a)(h,2),G=p[0],y=p[1],_=Object(a.useState)(5e3),A=Object(r.a)(_,2),T=A[0],V=A[1],w=Object(a.useMemo)((function(){var e=new AudioContext,t=e.createAnalyser(),n=e.createGain();n.gain.setValueAtTime(o,0),n.connect(e.destination);var a=e.createBiquadFilter();a.type="lowpass",a.frequency.value=T,a.connect(n);var i=e.createGain();i.gain.setValueAtTime(f,0),i.connect(a);var s=e.createGain();s.gain.setValueAtTime(G,0),s.connect(a);var c=e.createGain();return c.gain.setValueAtTime(d,0),c.connect(a),v.createAllNotes({audioContext:e,primaryFilter:a,sineGain:i,squareGain:s,noiseGain:c}),{audioContext:e,visualizer:t,primaryFilter:a,primaryGainControl:n,sineGain:i,squareGain:s,noiseGain:c}}),[]),C=w.audioContext,q=w.primaryFilter,E=w.primaryGainControl,S=w.sineGain,F=w.squareGain,M=w.noiseGain;Object(a.useEffect)((function(){q.frequency.value=Math.round(T)}),[T]),Object(a.useEffect)((function(){E.gain.setValueAtTime(o,C.currentTime)}),[o]),Object(a.useEffect)((function(){S.gain.setValueAtTime(f,C.currentTime),F.gain.setValueAtTime(G,C.currentTime),M.gain.setValueAtTime(d,C.currentTime)}),[f,G,d]);var B=Object(a.useCallback)((function(e){C.resume();var t=v.notes.find((function(t){return t.freq==e}));t&&(t.sineNoteGain.gain.setValueAtTime(f,C.currentTime),t.squareNoteGain.gain.setValueAtTime(G,C.currentTime),t.noiseNoteGain.gain.setValueAtTime(d,C.currentTime))}),[v.notes,C]),L=Object(a.useCallback)((function(e){var t=v.notes.find((function(t){return t.freq==e}));if(t){var n=t.sineNoteGain;n.gain.setValueAtTime(n.gain.value,C.currentTime),n.gain.exponentialRampToValueAtTime(1e-6,C.currentTime+.03);var a=t.squareNoteGain;a.gain.setValueAtTime(a.gain.value,C.currentTime),a.gain.exponentialRampToValueAtTime(1e-6,C.currentTime+.03);var i=t.noiseNoteGain;i.gain.setValueAtTime(i.gain.value,C.currentTime),i.gain.exponentialRampToValueAtTime(1e-6,C.currentTime+.03)}}),[v.notes,C]);return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("header",{className:"App-header",children:[Object(x.jsx)("div",{id:"oscilloscope"}),Object(x.jsx)(g,{octave:n,setOctave:i,mainVolume:o,setMainVolume:l,noiseVolume:d,setNoiseVolume:b,sineVolume:f,setSineVolume:N,squareVolume:G,setSquareVolume:y,filterFreq:T,setFilterFreq:V}),Object(x.jsx)(k,{playNoteHandler:B,stopNoteHandler:L,octave:n})]})})});c.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.77ff1e53.chunk.js.map